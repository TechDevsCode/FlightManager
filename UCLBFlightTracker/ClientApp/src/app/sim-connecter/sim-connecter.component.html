<div *ngIf="!jobService.activeJob" class="page-body">
    <h1>No Active Job!</h1>
    <button pButton label="Goto Jobs" [routerLink]="['/manage_jobs']"></button>
</div>

<div class="page-body" *ngIf="jobService.activeJob">
    <div class="row">
        <div class="col">
            <table class="table table-sm table-striped" *ngIf="jobService.activeJob">
                <thead>
                    <tr>
                        <th colspan="3">Job Details</th>
                    </tr>
                </thead>
                <thead>
                    <tr>
                        <th>Property</th>
                        <th>Value</th>
                        <th>Commands</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Job #</td>
                        <td>
                            {{jobService.activeJob.jobNumber}}
                        </td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>Job Name</td>
                        <td>{{jobService.activeJob.name}}</td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>Departure</td>
                        <td>{{jobService.activeJob.departure.icao}} - {{jobService.activeJob.departure.name}}</td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>Destination</td>
                        <td>{{jobService.activeJob.arrival.icao}} - {{jobService.activeJob.arrival.name}}</td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>Pilot</td>
                        <td>{{jobService.activeJob.pilot}}</td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>Flight #</td>
                        <td>{{jobService.activeJob.flightNumber}}</td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>Tail #</td>
                        <td>{{jobService.activeJob.tailNumber}}</td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>Job Status</td>
                        <td>{{jobService.activeJob.status}}</td>
                        <td>
                            <span class="p-buttonset">
                                <button pButton label="Start Job" (click)="jobService.startJob()"
                                    class="p-button-sm"></button>
                            </span>
                        </td>
                    </tr>
                    <tr>
                        <td>Flight Status</td>
                        <td>{{jobService.activeJob.flightStatus}}</td>
                        <td></td>
                    </tr>

                </tbody>
            </table>
        </div>
        <div class="col">
            <table class="table table-sm table-striped" *ngIf="simData">
                <thead>
                    <tr>
                        <th colspan="2">Flight Details</th>
                    </tr>
                </thead>
                <thead>
                    <tr>
                        <th>Property</th>
                        <th>Value</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Latitude</td>
                        <td>
                            <!-- <p-inputNumber [(ngModel)]="simData.Latitude" (ngModelChange)="setMarker()" [showButtons]="true"
                            buttonLayout="horizontal" spinnerMode="horizontal" decrementButtonClass="p-button-danger"
                            incrementButtonClass="p-button-success" incrementButtonIcon="pi pi-plus"
                            decrementButtonIcon="pi pi-minus" [step]="0.01" suffix=" degrees">
                        </p-inputNumber> -->
                            {{simData.Latitude | number}}
                        </td>
                    </tr>
                    <tr>
                        <td>Longitude</td>
                        <td>
                            {{simData.Longitude | number}}
                            <!-- <p-inputNumber [(ngModel)]="simData.Longitude" (ngModelChange)="setMarker()" [showButtons]="true"
                            buttonLayout="horizontal" spinnerMode="horizontal" decrementButtonClass="p-button-danger"
                            incrementButtonClass="p-button-success" incrementButtonIcon="pi pi-plus"
                            decrementButtonIcon="pi pi-minus" [step]="0.01" suffix=" degrees">
                        </p-inputNumber> -->
                        </td>
                    </tr>
                    <tr>
                        <td>Altitude</td>
                        <td>{{simData.Altitude | number : '1.0-0'}} feet</td>
                    </tr>
                    <tr>
                        <td>Heading</td>
                        <td>
                            <!-- <p-slider [(ngModel)]="simData.TrueHeading" (ngModelChange)="setMarker()" [min]="0" [max]="359">
                        </p-slider> -->
                            {{simData.TrueHeading | number}}
                        </td>
                    </tr>
                    <tr>
                        <td>Airline</td>
                        <td>{{simData.Airline}}</td>
                    </tr>
                    <tr>
                        <td>Flight Number</td>
                        <td>{{simData.FlightNumber}}</td>
                    </tr>
                    <tr>
                        <td>Tail Number</td>
                        <td>{{simData.TailNumber}}</td>
                    </tr>
                    <tr>
                        <td>Fuel</td>
                        <td>{{simData.FuelQty | number}} gallons</td>
                    </tr>

                    <tr>
                        <td>Status</td>
                        <td>
                            {{(simData.OnGround) ? 'Grounded' : 'Flying'}}
                        </td>
                    </tr>

                    <tr>
                        <td>Parking Brake</td>
                        <td>
                            {{(simData.ParkingBrake ? 'Set' : 'Released')}}
                        </td>
                    </tr>
                    <tr>
                        <td>At Departure Airport</td>
                        <td>
                            {{simData.AtDepartureAirport}}
                        </td>
                    </tr>
                    <tr>
                        <td>At Destination Airport</td>
                        <td>
                            {{simData.AtArrivalAirport}}
                        </td>
                    </tr>
                    <tr>
                        <td>Distance to Destination</td>
                        <td>
                            {{simData.DistanceToDestination | number}} km
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <span class="p-buttonset">
        <button pButton label="Init Plugin" (click)="requestInitPlugin()"></button>
        <!-- <button pButton class="p-button-sm" label="Set Marker" (click)="setMarker()"></button> -->
        <button pButton label="Center Map" (click)="centrMapOnPosition()"></button>
        <p-toggleButton [(ngModel)]="follow" onLabel="Follow" offLabel="Free"></p-toggleButton>
    </span>

    <p-gmap *ngIf="simData" [options]="options" [style]="{'width':'100%','height':'600px'}"
        (onMapReady)="setMap($event)"></p-gmap>


</div>